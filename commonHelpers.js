import{a as L,i as b}from"./assets/vendor-8cce9181.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();let y=0,v=0;const p=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),A=50,f=1e3,S=["1.1rem","1.4rem",".8rem","1.7rem"],M=["#E23636","#F9F3EE","#E1F8DC","#B8AFE6","#AEE1CD","#5EB0E5"],l=(t,r)=>Math.floor(Math.random()*(r-t+1))+t,h=t=>t[l(0,t.length-1)],q=(t,r,e,s)=>Math.sqrt(Math.pow(e-t,2)+Math.pow(s-r,2)),w=(t,r)=>q(y,v,t,r)>=A,N=(t,r)=>{const e=document.createElement("div");e.innerHTML="&#10022;",e.className="star",e.style.top=`${r+l(-20,20)}px`,e.style.left=`${t}px`,e.style.color=h(M),e.style.fontSize=h(S),document.body.appendChild(e);const s=10+5*parseFloat(getComputedStyle(e).fontSize);e.animate({translate:`0 ${r+s>p?p-r:s}px`,opacity:0,transform:`rotateX(${l(1,500)}deg) rotateY(${l(1,500)}deg)`},{duration:f,fill:"forwards"}),setTimeout(()=>{e.remove()},f)};addEventListener("mousemove",t=>{const{clientX:r,clientY:e}=t;w(r,e)&&(N(r,e),y=r,v=e)});const n=document.getElementById("form"),x=document.querySelector("[data-close-button]"),u=document.getElementById("overlay"),d=document.getElementById("modal"),C=L.create({baseURL:"https://portfolio-js.b.goit.study/api",headers:{Accept:"application/json"}}),E=t=>{d!==null&&(t==="open"?(d.classList.add("active"),u.classList.add("active")):t==="close"&&(d.classList.remove("active"),u.classList.remove("active")))},T=()=>{E("open")},m=()=>{E("close")},I=async t=>{try{const r=await C.post("/requests",t);$(r.data)}catch(r){z(r.message)}},$=t=>{F(t),n.reset()},z=t=>{b.error({title:"Error",message:t,position:"topRight"})},c=(t,r,e)=>{const s=t.parentNode;s.classList.add(e);const o=document.createElement("label");o.classList.add(`${e}-label`),o.textContent=r,s.append(o)},B=t=>{const r=t.parentNode;r.classList.remove("error","success");const e=r.querySelector(".error-label");e&&e.remove();const s=r.querySelector(".success-label");s&&s.remove()},F=t=>{const{title:r,message:e}=t,s=document.querySelector(".content");s.innerHTML="";const o=document.createElement("h2");o.textContent=r;const a=document.createElement("p");a.textContent=e,s.append(o,a),T()},g=()=>{const t=n.querySelectorAll(".form-control"),r=[];return t.forEach(e=>{const s=e.parentNode,o=e.getAttribute("type")||e.tagName.toLowerCase();switch(B(e),o){case"text":e.value.trim()===""?(s.classList.add("error"),c(e,"The field is required.","error"),r.push(e.getAttribute("name"))):(s.classList.remove("error"),c(e,"Success!","success"));break;case"email":const a=/^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;e.value.trim()===""||!a.test(e.value)?(s.classList.add("error"),c(e,"Invalid email, please try again","error"),r.push(e.getAttribute("name"))):(s.classList.remove("error"),c(e,"Success!","success"));break;default:e.value.trim()===""?(s.classList.add("error"),c(e,"The field is required.","error"),r.push(e.getAttribute("name"))):(s.classList.remove("error"),c(e,"Success!","success"));break}}),r.length>0};document.addEventListener("keyup",t=>{t.key==="Escape"&&m()});x.addEventListener("click",m);u.addEventListener("click",m);n.addEventListener("submit",t=>{if(t.preventDefault(),!g()){let e=Object.fromEntries(new FormData(document.getElementById("form")).entries());I(e),Array.prototype.forEach.call(n.querySelectorAll("label"),s=>{s.parentNode.removeChild(s)}),Array.prototype.forEach.call(document.querySelectorAll(".input-holder"),s=>{s.classList.remove("success")})}});n.addEventListener("input",t=>{g()});
//# sourceMappingURL=commonHelpers.js.map
